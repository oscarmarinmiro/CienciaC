<!DOCTYPE html>
<meta charset="utf-8">

<link rel="stylesheet" type="text/css" href="css/circular_tree.css">
<script src="bower_components/d3/d3.js"></script>
<script src="bower_components/jquery/dist/jquery.min.js"></script>
<script src="js/circular_tree.js"></script>

<body>

    <div id="options">
        Choose Dataset:
        <div id="select_file"><select id="files"></select></div>
    </div>

</body>



<script>

// Load config contents

var self = {};

d3.json("data/config_circular.json", function (error, json) {
    if (error) throw error;

    self.config_data = json;

    console.log(json);

    // Populate drop-down

    var files = $("#files");

    $.each(self.config_data, function (key,value){
        //http://stackoverflow.com/questions/815103/jquery-best-practice-to-populate-drop-down

        files.append($("<option />").val(key).text(key));
    });

    files.change(function()
    {
        var key = $(this).val();
        console.log("COMBO CHANGED");

        var content = self.config_data[key];
        console.log(content);
//       console.log($(this).val());

        // Remove old svg

        $("svg").remove();
        $("#tooltip").remove();

        self.my_tree = ccviz.viz.circularTree({'diameter': $(window).height()});
        self.my_tree.render(content.data);

    });

    files.trigger("change");

});


</script>